version: "2.1"

services:
  db:
    image: mysql:8.0
    environment:
        - MYSQL_ROOT_PASSWORD=123
        - MYSQL_DATABASE=revel_db
        - MYSQL_USER=revel
        - MYSQL_PASSWORD=123
    healthcheck:
        test: ["CMD", "mysqladmin" ,"ping", "-h", "localhost"]
        timeout: 10s
        retries: 10
  web:
    build: .
    ports:
        - 9001:9001
    depends_on:
        db:
            condition: service_healthy